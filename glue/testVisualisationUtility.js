

var glueCmd = {
  "visualise-feature": {
    "targetReferenceName": "REF_1a_M62321",
    "comparisonReferenceName": "REF_2b_AB030907",
    "featureName": "NS5A",
    "queryNucleotides": "GATGAGTGTCGTGCAGCCTCCAGGACCCCCCCTCCCGGGAGAGCCATAGTGGTCTGCGGAACCGGTGAGTACACCGGAATTGCCAGGACGACCGGGTCCTTTCTTGGATAAACCCGCTCAATGCCTGGAGATTTGGGCGTGCCCCCGCAAGACTGCTAGCCGAGTAGTGTTGGGTCGCGAAAGGCCTTGTGGTACTGCCTGATAGGGTGCTTGCGAGTGCCCCGGGAGGTCTCGTAGACCGTGCACCATGAGCACGAATCCTAAACCTCAAAGAAAAACCAAACGTAACACCAACCGTCGCCCACAGGACGTTAAGTTCCCGGGTGGCGGTCAGATCGTTGGTGGAGTTTACTTGTTGCCGCGCAGGGGCCCTAGATTGGGTGTGCGCGCGACGAGGAAGACTTCCGAGCGGTCACAACCTCGAGGTAGACGTCAGCCTATCCCCAAGGCACGTCGGCCCGAGGGCAGGACCTGGGCTCAGCCCGGGTACCCTTGGCCCCTCTATGGCAATGAGAGCTGCGGGTGGGCGGGATGGCTCCTGTCTCCCCGTGGCTCTCGGCCTAGTTGGGGCCCCTCAGACCCCCGGCGTAGGTCGCGCAATTTGGGTAAGGTCATCGATACCCTTACATGCGGCTTCGCCGACCTCATGGGGTACATACCGCTCGTCGGCGCCCCTCTTGGAGGCGTTGCCAGAGCCCTGGCGCATGGCGTCCGGGTTCTGGAAGACGGCGTGAACTATGCAACAGGGAACCTTCCTGGTTGCTCTTTCTCTATCTTCCTTCTGGCCCTGCTCTCTTGCCTGACTGTGCCCGCCTCGGCCTACCAAGTACGCAACTCCACAGGGCTTTACCATGTCACCAATGATTGCCCTAACTCGAGTATTGTGTACGAGGCGCCCGATGCCATCCTGCACACTCCGGGGTGTGTCCCTTGCGTTCGCGAAGGCAACACCTCGCGGTGTTGGGTGGCGATCACCCCCACGGTGGCCACCAGGGATGGCAAACTCCCCACAACGCAGCTTCGACGTCACATCGATCTGCTTGTCGGGAGCGCCACCCTCTGTTCGGCCCTTTACGTGGGGGATCTGTGCGGGTCTGTCTTTCTTGTCGGCCAACTGTTCACCTTCTCTCCCAGGCGCCACTGGTCGACGCAAGGCTGCAATTGTTCTATATATCCCGGCCATATAACGGGTCACCGAATGGCATGGGATATGATGATGAACTGGTCCCCTACGACGGCGTTGGTAGTGGCTCAGCTGCTCCGGATCCCTCAAGCCATCTTGGATATGATCGCTGGTGCCCACTGGGGAGTCCTGGCGGGCATAGCGTATTTTTCCATGGTGGGGAACTGGGCGAAGGTCCTGGTAGTGCTGCTGCTATTTGCCGGCGCCGACGCGACAACCACCGTCTCCGGGGGAAGTGCTGCCCACGGCGCGTCCATCATTACCAGTCTGTTCACACCAGGCGCCCGGCAGAACATCCAGCTGATCAACTCTAACGGTAGTTGGCACATCAATAGGACGGCCTTAAACTGCAATGATAGCCTTCACACCGGCTGGGTAGCAGGGCTTTTCTATTACCACAAATTCAATTCATCAGGCTGTACCGAGAGGATGGCCAGCTGCCGACCCCTTGCCGCTTTTGACCAGGGCTGGGGCTCCATCAGCTACGCCAACGGAAGCGGCTTCGATCAACGCCCTTACTGCTGGCACTACCCCCCAAAACCTTGCGGTATTGTGCCCGCAGCGAGCGTGTGTGGTCCGGTATATTGCTTCACTCCCAGCCCCGTGGTGGTGGGAACGACCGACGAGCGGGGCGCGCCTACCTTCACCTTTGGCGAGAATGAGACGGACGTCTTCATCCTTAATAACACCAGGCCGCCGCTGGGCAATTGGTTCGGATGCACCTGGATGAACTCAACTGGATTCACCAAGGTGTGCGGAGCGCCTCCTTGTCTCATCGGAGGGGTGGGCAACAACACCTTGCACTGCCCCACTGATTGTTTCCGCAAGCATCCGGAAGCCACATACTCTCGGTGCGGCTCCGGTCCCTGGATCACACCTAGATGCCTGGTCAACTACCCGTATAGGCTGTGGCATTATCCTTGTACCATCAACTACACCATATTCAAAGTCAGGATGTATGTGGGAGGGGTCGAGCACAGGCTGGAAGCTGCCTGCAACTGGACGCGGGGCGAGCGTTGCGATCTGGAAGACAGGGACAGGTCCGAGCTCAGCCCATTGCTGCTGTCCACCACACAGTGGCAGGTCCTTCCGTGTTCCTTCACAACCCTGCCAGCCTTGTCCACCGGCCTCATCCACCTCCACCAGAACATTGTGGACGTGCAATACTTGTACGGGGTGGGGTCAAGCGTCGTGTCCTGGGCCATTAAGTGGGAGTACGTCGTTCTCCTGTTTCTTTTGCTTGCAGACGCGCGCGTCTGCTCCTGCTTGTGGATGATGTTACTCATATCCCAAGCGGAGGCGGCTTTGGAGAACCTCGTAATACTCAATGCAGCATCCCTGGCCGGGACGCACGGTCTTGTATCCTTCCTCGTGTTCTTCTGCTTTGCTTGGTATCTGAAGGGTAAGTGGGTGCCCGGAGCGGTCTACGCCCTCTACGGGATGTGGCCTCTCCTCCTGCTCCTGTTGGCGTTGCCCCAGCGGGCATACGCGTTGGACACGGAGGCGGCCGCGTCGTGTGGTGGCGTTGTCCTTATCGGGTTAATGGTACTGACTCTGTCGCCATACTACAAGCGCTATATCAGCTGGTGCTTATGGTGGCTTCAGTATTTTCTGACCAGAGTGGAAGCGCAAATGCACGTGTGGGTTCCCCCCCTCAACGTTCGAGGGGGGCGTGACGCCGTCATCTTACTCATGTGTGTCGTGCACCCGACTCTGGTATTCGATATCACCAAACTGCTGTTGGCCGTCTTCGGACCTCTTTGGATTCTTCAAGCCAGTTTGCTCAAAGTACCCTACTTCGTGCGCGTCCAAGGCCTTCTCCGGATCTGCGCGCTAGCGCGGAAGATGGTCGGAGGTCATTACGTGCAAATGGTTATCATCAAGTTAGGGGCGCTTACTGGCACCTATATTTATAACCATCTCACTCCTCTTCGGGACTGGGCGCACAACGGCCTGCGAGATCTGGCCGTGGCTGTAGAGCCAGTTGTTTTCTCCCGAATGGAGACCAAGCTCATCACGTGGGGGGCAGATACCGCCGCGTGTGGTGACATCATCAACGGCTTGCCCGTCTCCGCCCGTAGGGGTCGGGAGATACTGCTCGGACCAGCCGACGGAATGACCTCCAAAGGGTGGAGGTTGCTGGCGCCCATCACAGCGTACGCCCAGCAGACACGGGGCCTCCTGGGATGCATAATCACCAGCCTAACTGGCCGGGATAAAAACCAAGTGGAGGGTGAGGTCCAAATTGTGTCAACTGCTGCCCAAACCTTCCTGGCAACGTGCATCAATGGTGTGTGCTGGACTGTCTACCACGGGGCCGGAACGAGGACCATTGCATCACCCAAGGGTCCTGTTATCCAGATGTATACCAATGTAGACAAAGACCTTGTGGGTTGGCCCGCTCCTCAAGGTGCCCGCTCATTGACACCCTGCACCTGCGGCTCCTCGGACCTTTACCTGGTCACGAGGCACGCTGATGTCATTCCCGTGCGCCGGCGGGGTGATAGCAGGGGCAGCCTGCTTTCGCCCCGACCCATCTCTTACTTGAAAGGCTCCTCGGGGGGTCCGCTGCTGTGCCCCGCGGGACACGCCGTGGGCATATTCAGGGCCGCGGTGTGTACCCGCGGAGTGGCTAAGGCGGTGGACTTTATCCCTGTGGAGAACCTAGAGACAACCATGAGGTCCCCGGTGTTCACGGACAACTCCTCTCCACCAGCAGTGCCCCAGAGCTTCCAGGTGGCCCACCTGCACGCTCCCACAGGCAGTGGTAAGAGCACCAAGGTCCCGGCTGCATACGCAGCCCAGGGCTATCAGGTGCTAGTGCTCAACCCCTCTGTTGCTGCAACACTGGGCTTTGGTGCCTACATGTCCAAGGCCCACGGGATCGATCCTAATATCAGGACCGGGGTGAGGACGATTACCACAGGCAGCCCCATCACGTACTCCACCTACGGCAAGTTCCTTGCCGACGGCGGGTGCTCGGGGGGCGCCTATGACATAATAATTTGTGATGAGTGCCACTCCACGGACGCTACATCTGTCCTGGGCATTGGCACTGTTCTTGACCAGGCGGAGACCGCGGGGGCGAGACTGGTTGTGCTCGCCACCGCTACCCCTCCGGGCTCTGTCACTGTGCCCCATCCTAACATCGAGGAGGTTGCTCTGTCCACCACCGGAGAGATCCCTTTCTACGGCAAGGCTATTCCCCTCGAAGTAATCAAGGGGGGGAGACATCTCATTTTCTGTCACTCAAAAAAGAAGTGCGACGAGCTCGCTGCAAAGCTGGTCGCTTTGGGCATCAATGCCGTGGCCTACTATCGCGGTCTTGACGTGTCCGTCATCCCGACCAGCGGTGATGTTGTCGTCGTAGCAACTGATGCTCTCATGACCGGCTACACTGGCGACTTCGACTCGGTGATAGACTGCAATACGTGTGTCACCCAATCAGTCGATTTTAGCCTTGACCCCACCTTCACCATTGAGACAACCACGCTTCCCCAGGATGCTGTCTCCCGCACTCAACGTCGGGGCAGGACTGGCAGGGGGAAGCCAGGCATCTACAGATTTGTGGCACCGGGGGAGCGCCCCTCCGGCATGTTCGACTCGTCCGTCCTCTGCGAGTGCTATGACGCGGGCTGCGCTTGGTACGAGCTCACGCCCGCCGAGACTACAGTTAGGCTACGAGCGTACATGAACACCCCGGGGCTTCCCGTGTGCCAGGACCATCTTGAATTTTGGGAGGGCGTCTTTACAGGCCTCACTCATATAGATGCCCACTTCCTATCCCAGACAAAGCAGAGTGGGGAGAACCTCCCTTACCTGGTAGCATACCAAGCCACCGTGTGCGCCAGGGCTCGGGCCCCTCCTCCATCGTGGGACCAGATGTGGAAGTGTTTGATCCGCCTCAAACCCACCCTCCATGGGCCAACACCTCTGCTCTACAGACTGGGCGCTGTCCAGAATGAAATCACCCTGACGCACCCAGTCACCAAGTACATCATGACATGCATGTCGGCCGACCTGGAGGTCGTCACGAGCACCTGGGTGCTCGTTGGCGGCGTCCTGGCTGCTCTGGCCGCGTATTGCCTGTCAACAGGCTGCGTGGTCATAGTGGGCAGGGTTGTCTTGTCCGGGAAGCCTGCAGTCATACCTGACAGGGAGGTTCTCTACCAGGAGTTCGATGAGATGGAAGAGTGCTCTCAGCACTTACCGTACATCGAGCAAGGGATGATGCTCGCCGAGCAGTTTAAGCAGAAGGCCCTCGGCCTCCTGCAGACCGCGTCCCGCCAGGCAGAGGTTATCACCCCTGCTGTCCAGACCAGCTGGGAAAAACTCGAGGCCTTCTGGGCGAAGCATATGTGGAACTTCATCAGTGGGATACAATATTTGGCGGGTCTGTCAACGTTGCCTGGTAACCCCGCCATTGCCTCATTGATGGCTTTTACAGCTGCCGTCACCAGCCCACTAACCACTAGCCAGACCCTCCTCTTCAACATATTGGGGGGGTGGGTGGCTGCCCAACTTGCCGCCCCCGGTGCCGCTACTGCCTTTGTGGGCGCTGGCTTAGCTGGCGCCGCCATCGGCAGTGTTGGACTGGGGAAGGTCCTCGTGGACATTCTTGCAGGGTACGGCGCGGGCGTGGCGGGAGCTCTTGTAGCATTCAAGATCATGAGCGGTGAGACCCCCTCCACGGAGGACCTGGTCAATCTACTGCCTGCCATCCTCTCGCCTGGAGCCCTTGTGGTCGGTGTGGTCTGTGCAGCAATACTGCGCCGGCATGTTGGCCCGGGCGAGGGGGCAGTGCAATGGATGAACCGGCTAATAGCATTCGCCTCCCGGGGGAACCATGTTTCCCCCACGCACTACGTGCCGGAGAGCGATGCGGCTGCCCGCGTCACTGCCATACTCAGCAGCCTTACCGTGACCCAGCTCTTAAGGCGACTGCACCAGTGGATAAGCTCGGAGTGCACCACTCCGTGCTCCGGCTCCTGGCTAAGGGACATCTGGGACTGGATATGCGAGGTGTTGAGCGACTTTAAGACCTGGCTAAAAGCCAAGCTCATGCCACACCTGCCTGGGATACCCCTTGTGTCCTGCCAGCGCGGGTATAGGGGGGTCTGGCGAGGAGATGGCGTTATGCATACTCGCTGCCACTGTGGAGCTGAGATCACTGGACATGTCAAAAACGGGACGATGAGGATCGTCGGTCCTAGGACCTGCAGGAACATGTGGAGTGGTACCTTCCCCATTAATGCCCAYACCACAGGCCCCTGCACCCCCCTTCCTGCGCCGAACTACACGTTCGCGCTATGGAGGGTGGCTGCAGAGGAATATGTGGAGATAAGGCAGGTAGGGGACTTCCACTACGTGACGGGTATGACTACTGACAATCTTAAATGCCCGTGCCAGGTCCCATCACCCGAATTTTTCACAGAACTGGACGGGGTGCGCCTACATAGGTTTGCGCCCCCCTGCAAGCCCTTGTTGCGGGAAGAGGTATCATTCAGAGTAGGACTCCACGAGTACCCGGTGGGGTCGCAGTTACCTTGCGAGCCCGAACCGGATGTGGCCGTGTTGACGTCCATGCTCACCGATCCCTCCCATATAACAGCAGAGGCTGCCGGGAGAAGGTTGGCGAGGGGATCACCCCCCTCCGTGGCCAGCTCCTCGGCTAGCCAGCTGTCTGCTCCATCTCTCAAGGCAACTTGTACCGTCAACCATGACTCCCCCGATGCCGATCTCATAGAGGCTAACCTCCTATGGAGGCAGGAGATGGGCGGCAACATCACCAGGGTTGAGTCAGAGAACAAAGTGGTGATTCTGGACTCCTTCGATCCGCTTGTGGCGGAGGAGGACGAGCGGGAGATCTCCGTAGCCGCAGAGATCCTGCGAAAGTCTCGGAGATTCACTCCGGCCCTGCCCATTTGGGCGCGGCCGGATTATAACCCCCCGCTACTAGAGACGTGGAAAAAGCCTGACTACGAACCACCTGTGGTCCATGGCTGTCCGCTTCCACCTCCACAGTCCCCTCCTGTGCCTCCGCCTCGGAAGAAGCGGACGGTGGTCCTCACCGAATCAACCCTATCTACTGCCTTGGCCGAACTTGCCACCAAAAGTTTCGGCGACTCCTCAACTTCCGGTATCACGGGTGACGATACGACAACGTCCTCTGAGCCCGCCTCCTCTGGCCGCCCCCTAGACTCCGACGCTGAGTCCTATTCTTCCATGCCCCCCCTGGAGGGGGAGCCTGGGGATCCGGATCTCAGCGACGGGTCATGGTCGACGGTCAGTAGTGAGGCCGGCACGGAGGATGTTGTGTGTTGCTCAATGTCTTATTCCTGGACAGGCGCACTCGTCACCCCGTGTGCTGCGGAAGAACAGAAACTGCCCATTAACGCACTGAGCAACTCGTTGCTACGTCACCACAATCTGGTGTACTCTACCACCTCACGCAGTGCTTGCCAAAGGCAGAAGAAGGTCACATTTGACAGACTGCAAGTTCTGGACAGCCACTACCAGGACGTGCTCAAGGAGGTTAAAGCAGCGGCGTCAAAAGTGAAGGCTAACTTGCTATCCGTAGAGGAAGCTTGCAACCTGACGCCCCCACACTCAGCCAAATCTAAGTTTGGCTATGGGGCAAAAGACGTCCGTTGCCATGCCAGAAAGGCCGTAGCCCACATCAACTCCGTGTGGAAAGACCTTCTGGAAGACAGTGTAACACCAATAGACACTACCATCATGGCTAAGAACGAGGTTTTCTGCGTTCAGCCTGAGAAGGGGGGTCGTAAGCCAGCTCGTCTCATCGTGTTCCCCGACCTGGGTGTGCGCGTGTGCGAGAAGATGGCCCTGTACGACGTGGTCACCAAGCTCCCCCTAGCCGTGATGGGAAGCTCCTACGGATTCCAGTACTCACCAGGACAGCGGGTTGAATTCCTCGTGCAAGCGTGGAAGTCCAAGAAAACCCCAATGGGGTTCTCGTATGATACCCGCTGCTTTGACTCCACAGTCACTGAGAGTGATATCCGTACGGAGGAGGCAATCTACCAATGTTGTGACCTGGACCCCCAAGCCCGCGTGGCCATCAAGTCCCTCACCGAGAGGCTTTATGTCGGGGGTCCTCTTACCAATTCAAGGGGGGAGAACTGCGGCTATCGCAGGTGCCGCGCGAGCGGCGTACTGACAACTAGCTGTGGTAACACCCTCACTTGCTACATCAAGGCCCGAGCAGCCTGTCGAGCCGCAGGGCTCCAGAACTGCACCATGCTCGTGTGTGGCGACGACTTGGTCGTTATCTGCGAAAGTGCGGGGGTCCAGGAGGACGCGGCGAGCCTGAGAGCCTTCACGGAGGCTATGACCAGGTACTCCGCCCCCCCCGGGGACCCCCCACAGCCGGAATACGACTTGGAGCTTATAACATCATGCTCCTCCAACGTGTCGGTCGCCCACGACGGCGCTGGAAAGAGGGTCTACTACCTTACCCGTGACCCTACAACTCCCCTCGCGAGAGCCGCGTGGGAGACAGCAAGACACACTCCAGTCAATTCCTGGCTAGGCAACATAATTATGTTTGCCCCCACGCTATGGGCGAGGATGATACTGATGACCCACTTCTTTAGCGTCCTCATAGCCAGGGACCAGCTTGAACAGGCCCTTGATTGCGAGATCTACGGAGCCTGCTACTCCATAGAACCACTGGATATACCTCCAATCATTCAAAGACTCCATGGCCTCAGCGCATTTTCGCTCCACAGTTACTCTCCAGGTGAAATCAATAGGGTGGCCGCATGCCTCAGGAAACTTGGGGTCCCGCCCTTGCGAGCTTGGAGACACCGGGCCCGGAATGTCCGCGCTAGGCTTCTGTCCAGAGGAGGTAGGGCTGCCATTTGTGGCAAGTACCTCTTCAACTGGGCAGTGAGAACAAAGCTCAAACTCACTCCAATAGCGGCCGCTAGCCAGCTGGACTTGTCCGGCTGGTTCACGGCTGGCTACAGCGGGGGAGACATTTATCACAGCGTGTCTCATGCCCGGCCCCGCTGGTTCTGGTTTTGCCTACTCCTGCTTGTTGCGGGGGTAGGCGTCTACCTCCTCCCCAACCGATGAAGGTTGGGGTAAACACTCCGGCCTTTTAGGCCTTTTCCTG",
    "queryToTargetRefSegments": [
          {
            "refStart": 96,
            "refEnd": 341,
            "queryStart": 2,
            "queryEnd": 247
          },
          {
            "refStart": 342,
            "refEnd": 9377,
            "queryStart": 248,
            "queryEnd": 9283
          },
          {
            "refStart": 9378,
            "refEnd": 9401,
            "queryStart": 9284,
            "queryEnd": 9307
          }
        ],
      "queryDetails": [
                       // within NS4A
            /*           {
                       	"id": "testDetail1",
                       	"segments": [
                    	    { "id": "1-1", "refStart": 5345, "refEnd": 5355 },
                       	    { "id": "1-2", "refStart": 5360, "refEnd": 5365 }
                       	 ]
                       },           
                       {
                       	"id": "testDetail2",
                       	"segments": [
                    	    { "id": "2-1", "refStart": 5362, "refEnd": 5365 }
                       	 ]
                       }           */
        ]
  }
};

var featureVisualisation;

glue.inMode("module/phdrVisualisationUtility", function() {
	featureVisualisation = glue.command(glueCmd);
});

glue.logInfo("featureVisualisation", featureVisualisation);

glue.inMode("module/phdrFeatureToSvgTransformer", function() {
	var transformerInput = {
			transformerInput: {
				featureVisualisation: featureVisualisation.featureVisualisation,
				ntWidth: 16
			}
		};
	glue.logInfo("transformerInput", transformerInput);
	glue.command({"transform-to-file" : {
		commandDocument: transformerInput,
		outputFile: "visualisedGenome.svg"
	}});
});

